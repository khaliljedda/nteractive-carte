<!DOCTYPE html>
<html lang="{{ str_replace('_', '-', app()->getLocale()) }}">
    <head>
        <meta charset="utf-8">
     <style>
     body{
         background-image:url('eniso.jpg');
     }
        #map{
         fillColor: getColor(feature.properties.density),
        weight: 2,
        opacity: 1,
        color: 'white',
        dashArray: '3',
        fillOpacity: 0.7
        }
     </style>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />
        <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
    </head>
    <body>
    
        <div id = "map" style = "width:1000px; height:780px; margin:auto"></div>
        <script>
        var geojsonFeature = {
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": {},
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              8.640747070312498,
              36.9367208722872
            ],
            [
              8.6517333984375,
              36.914764288955936
            ],
            [
              8.6297607421875,
              36.86204269508728
            ],
            [
              8.6737060546875,
              36.84006462037767
            ],
            [
              8.646240234375,
              36.80708566272707
            ],
            [
              8.6077880859375,
              36.79169061907076
            ],
            [
              8.59405517578125,
              36.796089518731506
            ],
            [
              8.56109619140625,
              36.771892444961026
            ],
            [
              8.52264404296875,
              36.7762924811868
            ],
            [
              8.480072021484375,
              36.77904237558059
            ],
            [
              8.429260253906248,
              36.75759058319245
            ],
            [
              8.436813354492188,
              36.74768773190056
            ],
            [
              8.459472656249998,
              36.75043865214185
            ],
            [
              8.468399047851562,
              36.74163536021999
            ],
            [
              8.487625122070312,
              36.696502641380036
            ],
            [
              8.458786010742188,
              36.662360301266546
            ],
            [
              8.447113037109375,
              36.618283282321165
            ],
            [
              8.414840698242188,
              36.62214102821768
            ],
            [
              8.386688232421875,
              36.59513275335954
            ],
            [
              8.328323364257812,
              36.57418104988909
            ],
            [
              8.309783935546875,
              36.54936246839778
            ],
            [
              8.159408569335938,
              36.49749349301178
            ],
            [
              8.155975341796875,
              36.47982803641967
            ],
            [
              8.1793212890625,
              36.461606315288165
            ],
            [
              8.203353881835938,
              36.4566360115962
            ],
            [
              8.249359130859375,
              36.445589751779174
            ],
            [
              8.34136962890625,
              36.43509434800219
            ],
            [
              8.354415893554688,
              36.445589751779174
            ],
            [
              8.381881713867188,
              36.42791246440695
            ],
            [
              8.413467407226562,
              36.42072991636534
            ],
            [
              8.3770751953125,
              36.29741818650811
            ],
            [
              8.338623046874998,
              36.25977754677541
            ],
            [
              8.3551025390625,
              36.24870331653198
            ],
            [
              8.308410644531248,
              36.17113976708937
            ],
            [
              8.3441162109375,
              36.097938036628065
            ],
            [
              8.294677734375,
              36.04465753921525
            ],
            [
              8.3001708984375,
              35.951329861522666
            ],
            [
              8.25897216796875,
              35.75765724051559
            ],
            [
              8.3551025390625,
              35.67068501330236
            ],
            [
              8.37158203125,
              35.46738105960409
            ],
            [
              8.3111572265625,
              35.294952147406576
            ],
            [
              8.45672607421875,
              35.23664622093195
            ],
            [
              8.30291748046875,
              34.942236637841184
            ],
            [
              8.23699951171875,
              34.91521472314689
            ],
            [
              8.29193115234375,
              34.728069689872285
            ],
            [
              8.2012939453125,
              34.57216798051356
            ],
            [
              7.868957519531249,
              34.4069096565206
            ],
            [
              7.8167724609375,
              34.20271636159618
            ],
            [
              7.6629638671875,
              34.18226973974575
            ],
            [
              7.539367675781249,
              34.075412438417395
            ],
            [
              7.555847167968749,
              33.804255802014865
            ],
            [
              7.808532714843749,
              33.20652045176062
            ],
            [
              8.12164306640625,
              33.08693925905123
            ],
            [
              8.3221435546875,
              32.80112754111693
            ],
            [
              8.3551025390625,
              32.50281289041497
            ],
            [
              9.06097412109375,
              32.084901663548315
            ],
            [
              9.56085205078125,
              30.22822147272596
            ],
            [
              9.76409912109375,
              30.35391637229704
            ],
            [
              9.88494873046875,
              30.344435586368462
            ],
            [
              10.283203125,
              30.899867985278892
            ],
            [
              10.258483886718748,
              31.076460800121122
            ],
            [
              10.1129150390625,
              31.431006719178512
            ],
            [
              10.140380859375,
              31.49191979634118
            ],
            [
              10.31341552734375,
              31.716485846385325
            ],
            [
              10.4644775390625,
              31.72583100387123
            ],
            [
              10.61553955078125,
              31.872892847840678
            ],
            [
              10.6182861328125,
              31.968473925845107
            ],
            [
              10.6787109375,
              31.968473925845107
            ],
            [
              10.909423828125,
              32.10118973232094
            ],
            [
              11.02752685546875,
              32.19653293006282
            ],
            [
              11.42852783203125,
              32.35444302709291
            ],
            [
              11.587829589843748,
              32.47964619410741
            ],
            [
              11.4752197265625,
              32.62549671451373
            ],
            [
              11.4862060546875,
              32.81959486923976
            ],
            [
              11.4862060546875,
              32.94875863715422
            ],
            [
              11.490325927734373,
              32.99369109062016
            ],
            [
              11.492385864257812,
              33.03457126491144
            ],
            [
              11.503372192382812,
              33.07428172063612
            ],
            [
              11.517105102539062,
              33.10247102094881
            ],
            [
              11.559677124023438,
              33.14042599482224
            ],
            [
              11.561737060546875,
              33.16342102407101
            ],
            [
              11.49444580078125,
              33.180088650285235
            ],
            [
              11.355056762695312,
              33.25304400990824
            ],
            [
              11.199874877929686,
              33.32134852669881
            ],
            [
              11.17652893066406,
              33.329380836623386
            ],
            [
              11.168289184570312,
              33.35003194768042
            ],
            [
              11.129150390625,
              33.37010472148162
            ],
            [
              11.105804443359375,
              33.35748808983665
            ],
            [
              11.09619140625,
              33.36264966025664
            ],
            [
              11.119537353515625,
              33.37297188262367
            ],
            [
              11.135330200195312,
              33.38501292737507
            ],
            [
              11.094818115234375,
              33.42628384909871
            ],
            [
              11.105804443359375,
              33.47154465603414
            ],
            [
              11.113357543945312,
              33.47727218776036
            ],
            [
              11.118850708007812,
              33.48299934087646
            ],
            [
              11.1126708984375,
              33.488726115350275
            ],
            [
              11.1181640625,
              33.49674296343326
            ],
            [
              11.11610412597656,
              33.51735430695927
            ],
            [
              11.11541748046875,
              33.53338195763831
            ],
            [
              11.108551025390625,
              33.55512901742288
            ],
            [
              11.060485839843748,
              33.610044573695646
            ],
            [
              11.044006347656248,
              33.62719851659249
            ],
            [
              11.0357666015625,
              33.62662677351111
            ],
            [
              11.02203369140625,
              33.63062889539564
            ],
            [
              11.00830078125,
              33.63920424472814
            ],
            [
              11.000747680664062,
              33.6477787401531
            ],
            [
              10.99456787109375,
              33.654066160697056
            ],
            [
              10.996627807617188,
              33.662067667998414
            ],
            [
              10.98907470703125,
              33.67349710191309
            ],
            [
              10.984954833984375,
              33.68206818063879
            ],
            [
              10.985641479492188,
              33.70206404131936
            ],
            [
              10.987014770507812,
              33.71691509702079
            ],
            [
              10.989761352539062,
              33.73633183280655
            ],
            [
              10.998687744140625,
              33.74946419232578
            ],
            [
              11.012420654296875,
              33.7580276912933
            ],
            [
              11.024093627929688,
              33.7614528513789
            ],
            [
              11.036453247070312,
              33.77286906313435
            ],
            [
              11.05499267578125,
              33.77800586221063
            ],
            [
              11.060485839843748,
              33.78428375388245
            ],
            [
              11.04949951171875,
              33.84076406581977
            ],
            [
              10.96160888671875,
              33.859012351859946
            ],
            [
              10.92864990234375,
              33.902336404480685
            ],
            [
              10.887451171875,
              33.91373381431625
            ],
            [
              10.9259033203125,
              33.89093747081252
            ],
            [
              10.85174560546875,
              33.89321737944089
            ],
            [
              10.78582763671875,
              33.895497227123876
            ],
            [
              10.71990966796875,
              33.88637747072754
            ],
            [
              10.7501220703125,
              33.815666308702774
            ],
            [
              10.72540283203125,
              33.77229828866843
            ],
            [
              10.71990966796875,
              33.75631505992707
            ],
            [
              10.70068359375,
              33.73804486328907
            ],
            [
              10.6622314453125,
              33.69235234723729
            ],
            [
              10.601806640625,
              33.67406853374198
            ],
            [
              10.52215576171875,
              33.648921941686545
            ],
            [
              10.447998046875,
              33.65120829920497
            ],
            [
              10.3656005859375,
              33.68092541950744
            ],
            [
              10.1953125,
              33.80882018730745
            ],
            [
              10.1458740234375,
              33.87269600798948
            ],
            [
              10.096435546875,
              33.925129700072
            ],
            [
              10.06622314453125,
              33.98664113654014
            ],
            [
              10.030517578125,
              34.068587174791965
            ],
            [
              10.016784667968748,
              34.175453097578526
            ],
            [
              10.09918212890625,
              34.30260622622907
            ],
            [
              10.21453857421875,
              34.35704160076073
            ],
            [
              10.28594970703125,
              34.40237742424137
            ],
            [
              10.338134765625,
              34.397844946449865
            ],
            [
              10.4150390625,
              34.465806327688526
            ],
            [
              10.47271728515625,
              34.52013562807766
            ],
            [
              10.5633544921875,
              34.52692430140103
            ],
            [
              10.60455322265625,
              34.551811369170494
            ],
            [
              10.64849853515625,
              34.6241677899049
            ],
            [
              10.73638916015625,
              34.64450667793234
            ],
            [
              10.7666015625,
              34.73484137177769
            ],
            [
              10.89019775390625,
              34.80252766591687
            ],
            [
              10.91766357421875,
              34.94448806230625
            ],
            [
              10.9918212890625,
              35.0120020431607
            ],
            [
              11.02752685546875,
              35.054732099950705
            ],
            [
              11.02203369140625,
              35.10193405724606
            ],
            [
              11.05224609375,
              35.16258214808429
            ],
            [
              11.090698242187498,
              35.17156320800291
            ],
            [
              11.1126708984375,
              35.21869749632885
            ],
            [
              11.151123046874998,
              35.21869749632885
            ],
            [
              11.1181640625,
              35.24113278166642
            ],
            [
              11.044006347656248,
              35.32184842037683
            ],
            [
              11.03302001953125,
              35.37337460834958
            ],
            [
              11.04949951171875,
              35.40696093270201
            ],
            [
              11.04949951171875,
              35.46961797120201
            ],
            [
              11.05224609375,
              35.51881428123057
            ],
            [
              11.03851318359375,
              35.572448615622804
            ],
            [
              11.04949951171875,
              35.62381451392674
            ],
            [
              10.986328125,
              35.652832827451654
            ],
            [
              10.892944335937498,
              35.67068501330236
            ],
            [
              10.821533203125,
              35.72421761691415
            ],
            [
              10.843505859375,
              35.766572101173516
            ],
            [
              10.810546875,
              35.77994251888403
            ],
            [
              10.73638916015625,
              35.77325759103725
            ],
            [
              10.651245117187498,
              35.811131416437966
            ],
            [
              10.60455322265625,
              35.871246850027966
            ],
            [
              10.56610107421875,
              35.93798832265393
            ],
            [
              10.5194091796875,
              36.00022956178002
            ],
            [
              10.49468994140625,
              36.046878280461684
            ],
            [
              10.46173095703125,
              36.11125252076156
            ],
            [
              10.47821044921875,
              36.22876574685929
            ],
            [
              10.5194091796875,
              36.304058768042964
            ],
            [
              10.5743408203125,
              36.392545812446244
            ],
            [
              10.65948486328125,
              36.39696752441776
            ],
            [
              10.8050537109375,
              36.46326301239126
            ],
            [
              11.060485839843748,
              36.824676208856175
            ],
            [
              11.12640380859375,
              36.846658706232816
            ],
            [
              11.129150390625,
              36.87522650673951
            ],
            [
              11.085205078125,
              36.97183825093165
            ],
            [
              11.05224609375,
              37.00913272027146
            ],
            [
              11.074218749999998,
              37.05298514989097
            ],
            [
              11.03851318359375,
              37.07928445197303
            ],
            [
              10.9039306640625,
              37.05079312980657
            ],
            [
              10.91766357421875,
              37.00693943418586
            ],
            [
              10.681457519531248,
              36.87742358748459
            ],
            [
              10.590820312499998,
              36.88401445049676
            ],
            [
              10.55511474609375,
              36.78289206199065
            ],
            [
              10.47821044921875,
              36.73668306473141
            ],
            [
              10.41229248046875,
              36.71907231552909
            ],
            [
              10.34088134765625,
              36.712467243386264
            ],
            [
              10.2996826171875,
              36.767492156196745
            ],
            [
              10.316162109375,
              36.82687474287728
            ],
            [
              10.36285400390625,
              36.87522650673951
            ],
            [
              10.318908691406248,
              36.90817608096904
            ],
            [
              10.2667236328125,
              36.94330661415311
            ],
            [
              10.17608642578125,
              37.06175259706909
            ],
            [
              10.20904541015625,
              37.10557463437788
            ],
            [
              10.18157958984375,
              37.125286284966805
            ],
            [
              10.1568603515625,
              37.155938651244625
            ],
            [
              10.2117919921875,
              37.153749608429415
            ],
            [
              10.288696289062498,
              37.17126017626408
            ],
            [
              10.19256591796875,
              37.223767535823576
            ],
            [
              10.12664794921875,
              37.254379960133264
            ],
            [
              10.08270263671875,
              37.274052809979054
            ],
            [
              10.030517578125,
              37.278423856453706
            ],
            [
              9.956359863281248,
              37.2587521486561
            ],
            [
              9.91790771484375,
              37.30682947124943
            ],
            [
              9.87396240234375,
              37.33522435930639
            ],
            [
              9.7943115234375,
              37.35269280367274
            ],
            [
              9.5855712890625,
              37.34177550214858
            ],
            [
              9.349365234375,
              37.29153547292737
            ],
            [
              9.154357910156248,
              37.2456348218214
            ],
            [
              9.07745361328125,
              37.17563718436526
            ],
            [
              9.00604248046875,
              37.13404537126446
            ],
            [
              8.942871093749998,
              37.083666782415534
            ],
            [
              8.9044189453125,
              37.03106210011894
            ],
            [
              8.86322021484375,
              36.99597205450302
            ],
            [
              8.8055419921875,
              36.96525497589677
            ],
            [
              8.76434326171875,
              36.94989178681327
            ],
            [
              8.7396240234375,
              36.96306042436515
            ],
            [
              8.6737060546875,
              36.95208671786997
            ],
            [
              8.6517333984375,
              36.94769679250732
            ],
            [
              8.640747070312498,
              36.9367208722872
            ]
          ]
        ]
      }
    }
  ]
};

            // Creating map options
            var mapOptions = {
                center: [33.8004227,11.0531045],
                zoom: 7
            }
            // Creating a map object
            var map = new L.map('map', mapOptions);
            L.geoJSON(geojsonFeature).addTo(map);
            // Creating a Layer object
            var layer = new L.TileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png');

            // Adding layer to the map
            map.addLayer(layer);
            
            // Icon options
            var iconOptions = {
                iconUrl: 'logo.png',
                iconSize: [20, 30]
             
            }
            // Creating a custom icon
            var customIcon = L.icon(iconOptions);
            // Creating Marker Options
            var markerOptions = {
                title: "labo",
                clickable: true,
                draggable: false,
                icon: customIcon
            }
            
            // Creating a Marker
            @foreach($labs as $lab)
                 var lab = {!!json_encode($lab)!!};
                console.log(lab);
                var marker = L.marker([lab.lat,lab.leng], markerOptions); 
                // Adding popup to the marker
                marker.bindPopup('name: '+lab.name+'</br>'+'capacite: '+lab.capacite+'</br> recu: '+lab.recu+'</br> phone: '+lab.phone).openPopup();
                // Adding marker to the map
                marker.addTo(map);
            @endforeach
        </script>
    </body>
    </html>